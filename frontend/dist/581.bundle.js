"use strict";(self.webpackChunkassignment=self.webpackChunkassignment||[]).push([[581],{6598:function(e,n,t){t.d(n,{SR:function(){return u},Vx:function(){return o},Zw:function(){return i},kS:function(){return s},rQ:function(){return l},v_:function(){return c}});var a=t(9669),r=t.n(a);r().defaults.baseURL="https://alizahedigolassignments.herokuapp.com";var i=function(e){var n=new FormData;return n.append("username",e.email),n.append("password",e.password),n.append("client_id","C8Qp0eQnhosJ9Z1DNd7UvQ5M9tiMT4pleqlWkqW3"),n.append("client_secret","b49eoIqNsMEtUhlGjymYabD14AbfCWx99Z0bcsO82AYweB9ZaZJJtZARmDx1f1QN3kjy7IpKYuuZzynUy7NDpeRVZcFPA8XaHR1pAXvVeBNMh9dxvZjqknSrqvwzDkRd"),n.append("grant_type","password"),r()({url:"/oauth/token/",method:"post",data:n,headers:{Accept:"application/json","content-type":"application/json"}})},s=function(e){var n=new Headers;n.append("Authorization","Bearer ".concat(e));var t=new FormData;return t.append("token",e),t.append("client_id","C8Qp0eQnhosJ9Z1DNd7UvQ5M9tiMT4pleqlWkqW3"),t.append("client_secret","b49eoIqNsMEtUhlGjymYabD14AbfCWx99Z0bcsO82AYweB9ZaZJJtZARmDx1f1QN3kjy7IpKYuuZzynUy7NDpeRVZcFPA8XaHR1pAXvVeBNMh9dxvZjqknSrqvwzDkRd"),r()({url:"/oauth/revoke_token/",method:"post",data:t,headers:n})},l=function(e,n){var t=new Headers;t.append("Authorization","Bearer ".concat(n));var a={method:"GET",headers:t,redirect:"follow"};return fetch("".concat("https://alizahedigolassignments.herokuapp.com").concat(e),a)},o=function(e,n,t){var a=new Headers,r={method:"PATCH",headers:a,body:e,redirect:"follow"};return a.append("Authorization","Bearer ".concat(t)),fetch("".concat("https://alizahedigolassignments.herokuapp.com").concat(n),r)},c=function(e,n,t){var a=new Headers,r={method:"POST",headers:a,body:e,redirect:"follow"};return a.append("Authorization","Bearer ".concat(t)),fetch("".concat("https://alizahedigolassignments.herokuapp.com").concat(n),r)},u=function(e,n){var t=new Headers,a={method:"DELETE",headers:t};return t.append("Authorization","Bearer ".concat(n)),fetch("".concat("https://alizahedigolassignments.herokuapp.com").concat(e),a)}},581:function(e,n,t){t.r(n);var a,r,i=t(9439),s=t(168),l=t(7294),o=t(1230),c=t(7681),u=t(5026),d=t(2239),p=t(5019),h=t(1382),m=t(5746),f=t(1577),Z=t(8804),g=t(6974),y=t(6598),j=t(5893),v=(0,Z.ZP)(o.Z)(a||(a=(0,s.Z)(["\n  background-color: #f6f6f6;\n  padding: 1rem 0;\n  min-height: 100vh;\n  min-width: 100vw;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),x=(0,Z.ZP)(o.Z)(r||(r=(0,s.Z)(["\n  background-color: #fff;\n  width: 80vw;\n  padding: 1rem 2rem;\n  & .ant-form-item-label {\n    padding: 0;\n  }\n"])));n.default=function(){var e,n=localStorage.getItem("token"),t=c.Z.useForm(),a=(0,i.Z)(t,1)[0],r=(0,l.useState)(!1),s=(0,i.Z)(r,2),Z=s[0],w=s[1],b=(0,g.s0)(),k=(0,l.useState)(),C=(0,i.Z)(k,2),S=C[0],q=C[1],A=(0,l.useState)([]),D=(0,i.Z)(A,2),z=D[0],I=D[1],N=(0,l.useState)(),P=(0,i.Z)(N,2),T=P[0],V=P[1],_=(0,l.useState)(),F=(0,i.Z)(_,2),Q=F[0],U=F[1],B=(0,l.useState)([]),M=(0,i.Z)(B,2),R=M[0],H=M[1],E=(0,l.useState)(),L=(0,i.Z)(E,2),J=L[0],O=L[1],W=(0,l.useState)(),Y=(0,i.Z)(W,2),X=Y[0],G=Y[1];(0,l.useEffect)((function(){w(!0),(0,y.rQ)("/api/users/my/",n).then((function(e){return e.json()})).then((function(e){q(e),w(!1)})),(0,y.rQ)("/api/countries/",n).then((function(e){return e.json()})).then((function(e){I(e),w(!1)}))}),[]);var K=function(e){a.setFieldsValue({city:null==e?void 0:e.toString()}),U(e)},$=function(e){K(null);var n=z.find((function(n){return n.id===+e}));H(n.cities),V(e),a.setFieldsValue({country:null==e?void 0:e.toString()})};(0,l.useEffect)((function(){var e;if(null!=S&&S.city&&0!==z.length){var n=z&&z[parseInt(null==S?void 0:S.country,10)-1].cities;$(null==S?void 0:S.country);var t=null==n||null===(e=n.find((function(e){return e.id===S.city})))||void 0===e?void 0:e.id;K(t)}}),[z,S]);var ee=d.Z.Option,ne=p.Z.TextArea;return Z?(0,j.jsx)(o.Z,{justify:"center",align:"middle",style:{width:"100vw",height:"100vh"},children:(0,j.jsx)(h.Z,{size:"large"})}):(0,j.jsx)(v,{justify:"center",children:(0,j.jsxs)(x,{children:[(0,j.jsx)(m.Z,{xs:24,style:{height:"fit-content"},children:(0,j.jsxs)(o.Z,{justify:"end",children:[(0,j.jsx)(f.Z,{type:"primary",onClick:function(){return b("/",{replace:!0})},children:"Homepage"}),(0,j.jsx)(f.Z,{style:{marginLeft:8},type:"primary",onClick:function(){(0,y.kS)(n).then((function(e){200===e.status&&(localStorage.clear("token"),b("/auth/login",{replace:!0}))}))},children:"Log out"})]})}),(0,j.jsx)(m.Z,{xs:24,children:(0,j.jsx)(c.Z,{requiredMark:"optional",onFinish:function(e){var t=new FormData;t.append("email",e.email),t.append("first_name",e.firstName),t.append("last_name",e.lastName),t.append("gender",e.gender),t.append("age",e.age),t.append("city",null!=Q?Q:""),(0,y.Vx)(t,"/api/users/".concat(null==S?void 0:S.id,"/"),n).then((function(e){return e.json()})).then((function(e){q(e),u.ZP.success("user Updated successfully")})).catch((function(){return u.ZP.error("something went wrong!")}))},form:a,children:(0,j.jsxs)(o.Z,{children:[(0,j.jsx)(m.Z,{md:{span:7,offset:1},children:(0,j.jsx)(c.Z.Item,{name:"firstName",style:{margin:0},label:"name:",initialValue:null==S?void 0:S.first_name,labelCol:{span:24},rules:[{required:!0,message:"please enter your name"}],children:(0,j.jsx)(p.Z,{})})}),(0,j.jsx)(m.Z,{md:{span:7,offset:1},children:(0,j.jsx)(c.Z.Item,{name:"lastName",style:{margin:0},label:"last name:",initialValue:null==S?void 0:S.last_name,labelCol:{span:24},rules:[{required:!0,message:"please enter your last name"}],children:(0,j.jsx)(p.Z,{})})}),(0,j.jsx)(m.Z,{md:{span:7,offset:1},children:(0,j.jsx)(c.Z.Item,{name:"gender",style:{margin:0},label:"gender:",initialValue:null==S||null===(e=S.gender)||void 0===e?void 0:e.toString(),labelCol:{span:24},rules:[{required:!0,message:"please enter your gender"}],children:(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(ee,{value:"1",children:"Male"}),(0,j.jsx)(ee,{value:"2",children:"female"})]})})}),(0,j.jsx)(m.Z,{md:{span:7,offset:1},children:(0,j.jsx)(c.Z.Item,{name:"age",style:{margin:0},label:"age:",initialValue:null==S?void 0:S.age,labelCol:{span:24},rules:[{required:!0,message:"please enter your age"}],children:(0,j.jsx)(p.Z,{type:"number"})})}),(0,j.jsx)(m.Z,{md:{span:7,offset:1},children:(0,j.jsx)(c.Z.Item,{name:"email",style:{margin:0},label:"email:",labelCol:{span:24},initialValue:null==S?void 0:S.email,rules:[{required:!0,message:"please enter your email address"}],children:(0,j.jsx)(p.Z,{type:"email",allowClear:!0})})}),(0,j.jsx)(m.Z,{md:{span:7,offset:1},children:(0,j.jsx)(c.Z.Item,{name:"country",style:{margin:0},label:"country:",labelCol:{span:24},rules:[{required:!1,message:"please enter country"}],children:(0,j.jsx)(d.Z,{showSearch:!0,onChange:$,filterOption:function(e,n){return n.children.toLowerCase().includes(e.toLowerCase())},children:z.map((function(e){return(0,j.jsx)(ee,{children:e.name},e.id.toString())}))})})}),(0,j.jsx)(m.Z,{md:{span:7,offset:1},children:(0,j.jsx)(c.Z.Item,{name:"city",style:{margin:0},label:"city:",labelCol:{span:24},rules:[{required:!1,message:"please enter city"}],children:(0,j.jsx)(d.Z,{disabled:!T,filterOption:function(e,n){return n.children.toLowerCase().includes(e.toLowerCase())},showSearch:!0,onChange:K,children:R.map((function(e){return(0,j.jsx)(ee,{children:e.name},e.id.toString())}))})})}),(0,j.jsx)(m.Z,{span:24,offset:1,style:{marginTop:12},children:(0,j.jsx)(f.Z,{htmlType:"submit",children:"Update user Data"})})]})})}),(0,j.jsxs)(m.Z,{md:{span:23,offset:1},style:{marginTop:16},children:[(0,j.jsx)("h2",{children:"Input data"}),(0,j.jsx)(p.Z,{type:"file",name:"file",onChange:function(e){O(e.target.files[0])},accept:".csv"}),(0,j.jsx)(f.Z,{type:"primary",onClick:function(){var e=new FormData;e.append("csv",J),(0,y.v_)(e,"/api/sales/import-csv/",n).then((function(e){return e.json()})).then((function(e){null!=e&&e.error?u.ZP.error(null==e?void 0:e.error):u.ZP.success("file uploaded!")})).catch((function(e){u.ZP.error("something went wrong! try again")}))},children:"Upload"})]}),(0,j.jsxs)(m.Z,{md:{span:23,offset:1},style:{marginTop:16},children:[(0,j.jsx)("h2",{children:"Input data"}),(0,j.jsxs)(c.Z,{children:[(0,j.jsx)(ne,{placeholder:"you can type here",rows:6,onChange:function(e){G(e.target.value)}}),(0,j.jsx)(o.Z,{justify:"center",style:{marginTop:8},children:(0,j.jsx)(f.Z,{type:"primary",htmlType:"submit",onClick:function(){var e,t;return e=new Blob([X],{type:"text/csv;charset=utf-8;",filename:"data.csv"}),(t=new FormData).append("csv",e),(0,y.v_)(t,"/api/sales/import-csv/",n).then((function(e){return e.json()})).then((function(e){null!=e&&e.error?u.ZP.error(null==e?void 0:e.error):u.ZP.success("file uploaded!")})).catch((function(e){u.ZP.error("something went wrong! try again")})),!1},children:"Upload"})})]})]})]})})}}}]);