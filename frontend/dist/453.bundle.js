"use strict";(self.webpackChunkassignment=self.webpackChunkassignment||[]).push([[453],{6598:function(e,n,t){t.d(n,{SR:function(){return u},Vx:function(){return l},Zw:function(){return s},kS:function(){return a},rQ:function(){return o},v_:function(){return c}});var r=t(9669),i=t.n(r);i().defaults.baseURL="https://alizahedigolassignments.herokuapp.com";var s=function(e){var n=new FormData;return n.append("username",e.email),n.append("password",e.password),n.append("client_id","C8Qp0eQnhosJ9Z1DNd7UvQ5M9tiMT4pleqlWkqW3"),n.append("client_secret","b49eoIqNsMEtUhlGjymYabD14AbfCWx99Z0bcsO82AYweB9ZaZJJtZARmDx1f1QN3kjy7IpKYuuZzynUy7NDpeRVZcFPA8XaHR1pAXvVeBNMh9dxvZjqknSrqvwzDkRd"),n.append("grant_type","password"),i()({url:"/oauth/token/",method:"post",data:n,headers:{Accept:"application/json","content-type":"application/json"}})},a=function(e){var n=new Headers;n.append("Authorization","Bearer ".concat(e));var t=new FormData;return t.append("token",e),t.append("client_id","C8Qp0eQnhosJ9Z1DNd7UvQ5M9tiMT4pleqlWkqW3"),t.append("client_secret","b49eoIqNsMEtUhlGjymYabD14AbfCWx99Z0bcsO82AYweB9ZaZJJtZARmDx1f1QN3kjy7IpKYuuZzynUy7NDpeRVZcFPA8XaHR1pAXvVeBNMh9dxvZjqknSrqvwzDkRd"),i()({url:"/oauth/revoke_token/",method:"post",data:t,headers:n})},o=function(e,n){var t=new Headers;t.append("Authorization","Bearer ".concat(n));var r={method:"GET",headers:t,redirect:"follow"};return fetch("".concat("https://alizahedigolassignments.herokuapp.com").concat(e),r)},l=function(e,n,t){var r=new Headers,i={method:"PATCH",headers:r,body:e,redirect:"follow"};return r.append("Authorization","Bearer ".concat(t)),fetch("".concat("https://alizahedigolassignments.herokuapp.com").concat(n),i)},c=function(e,n,t){var r=new Headers,i={method:"POST",headers:r,body:e,redirect:"follow"};return r.append("Authorization","Bearer ".concat(t)),fetch("".concat("https://alizahedigolassignments.herokuapp.com").concat(n),i)},u=function(e,n){var t=new Headers,r={method:"DELETE",headers:t};return t.append("Authorization","Bearer ".concat(n)),fetch("".concat("https://alizahedigolassignments.herokuapp.com").concat(e),r)}},7453:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r,i=t(9439),s=t(168),a=t(7294),o=t(1230),l=t(5746),c=t(2239),u=t(5026),d=t(1382),p=t(1577),h=t(8804),f=t(9711),m=t(6974),j=t(6926),b=t(7681),x=t(6170),g=t(975),v=t(3515),Z=t(5019),y=t(5893),w=(0,h.ZP)(j.Z)(r||(r=(0,s.Z)(["\n  .editable-row .ant-form-item-explain {\n    position: absolute;\n    top: 100%;\n    font-size: 12px;\n  }\n"]))),k=function(e){var n=e.dataSource,t=e.onRemoveRecord,r=e.onUpdateRecord,s=(0,a.useState)(),l=(0,i.Z)(s,2),c=l[0],u=l[1],d=(0,a.useState)(!1),h=(0,i.Z)(d,2),f=h[0],m=h[1],j=b.Z.useForm(),k=(0,i.Z)(j,1)[0];(0,a.useEffect)((function(){if(f){var e=n.find((function(e){return e.id===c}));k.setFieldsValue({sales_number:e.sales_number,revenue:e.revenue})}}),[f]);var S=[{title:"Date",dataIndex:"date",editable:!1},{title:"Product",dataIndex:"product",editable:!1},{title:"Number",dataIndex:"sales_number",editable:!0},{title:"Revenue",dataIndex:"revenue",editable:!0},{title:"Operation",dataIndex:"operation",render:function(e,n){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x.Z.Link,{onClick:function(){m(!0),u(n.id)},children:"Edit"}),(0,y.jsx)(g.Z,{title:"Sure to delete?",onConfirm:function(){return t(n.id)},children:(0,y.jsx)(x.Z.Link,{style:{color:"red",marginLeft:6},children:"delete"})})]})}}];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(w,{bordered:!0,rowKey:"id",dataSource:n,columns:S,rowClassName:"editable-row",pagination:!1}),(0,y.jsx)(v.Z,{title:"edit Product",footer:!1,visible:f,onCancel:function(){return m(!1)},children:(0,y.jsxs)(b.Z,{onFinish:function(e){r(c,e),m(!1)},requiredMark:"optional",form:k,children:[(0,y.jsx)(b.Z.Item,{name:"revenue",label:"new revenue",labelCol:{span:24},rules:[{required:!0,message:"please enter new revenue"}],children:(0,y.jsx)(Z.Z,{})}),(0,y.jsx)(b.Z.Item,{name:"sales_number",label:"new sales number",labelCol:{span:24},rules:[{required:!0,message:"please enter new sales number"}],children:(0,y.jsx)(Z.Z,{})}),(0,y.jsx)(o.Z,{justify:"center",children:(0,y.jsxs)(p.Z,{htmlType:"submit",type:"primary",children:[" ","Edit"]})})]})})]})},S=t(4942),D=t(2181),O=t(5376);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){var n=e.saleList,t=e.mode,r=[],i={};n&&(r=null==n?void 0:n.reduce((function(e,n){var t=null==n?void 0:n.product_normalized;return i[t]?(i[t].sales_number+=n.sales_number,i[t].revenue+=Number(n.revenue)):(i[t]=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){(0,S.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},n),i[t].sales_number=Number(i[t].sales_number),i[t].revenue=Number(i[t].revenue),e.push(i[t])),delete i[t].date,delete i[t].id,delete i[t].user,e}),[]));var s=r.map((function(e){return e.sales_number})),a=r.map((function(e){return e.revenue})),o={labels:r.map((function(e){return e.product})),datasets:[{label:"dataset",data:1===t?s:a,backgroundColor:"lightblue"}]};return(0,y.jsx)(O.$Q,{options:{responsive:!0,plugins:{legend:{position:"top"}}},data:o})}D.kL.register(D.uw,D.f$,D.ZL,D.Dx,D.u,D.De);var A,R,C,z=t(6598),N=(0,h.ZP)(o.Z)(A||(A=(0,s.Z)(["\n  background-color: #f6f6f6;\n  padding: 1rem 0;\n  min-height: 100vh;\n  min-width: 100vw;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),E=(0,h.ZP)(o.Z)(R||(R=(0,s.Z)(["\n  background-color: #fff;\n  width: 90vw;\n  padding: 1rem 2rem;\n  & .ant-form-item-label {\n    padding: 0;\n  }\n"]))),q=(0,h.ZP)(l.Z)(C||(C=(0,s.Z)(["\n  border-bottom: 1px solid grey;\n  margin-bottom: 2rem;\n"]))),I=function(){var e,n=(0,a.useState)(!1),t=(0,i.Z)(n,2),r=t[0],s=t[1],h=(0,a.useState)(),j=(0,i.Z)(h,2),b=j[0],x=j[1],g=(0,a.useState)([]),v=(0,i.Z)(g,2),Z=v[0],w=v[1],S=(0,a.useState)([]),D=(0,i.Z)(S,2),O=D[0],P=D[1],A=(0,a.useState)([]),R=(0,i.Z)(A,2),C=R[0],I=R[1],Q=(0,a.useState)(1),W=(0,i.Z)(Q,2),B=W[0],U=W[1],F=localStorage.getItem("token"),L=(0,m.s0)(),M=c.Z.Option;return(0,a.useEffect)((function(){s(!0),F&&((0,z.rQ)("/api/users/my/",F).then((function(e){return e.json()})).then((function(e){x(e),s(!1)})),(0,z.rQ)("/api/sales/",F).then((function(e){return e.json()})).then((function(e){I(e),s(!1)})),(0,z.rQ)("/api/countries/",F).then((function(e){return e.json()})).then((function(e){w(e),s(!1)})))}),[F]),(0,a.useEffect)((function(){if(null!=b&&b.city&&0!==Z.length){var e=Z&&Z[parseInt(null==b?void 0:b.country,10)-1].cities,n=null==e?void 0:e.find((function(e){return e.id===b.city})).name;P(n)}}),[Z]),r?(0,y.jsx)(o.Z,{justify:"center",align:"middle",style:{width:"100vw",height:"100vh"},children:(0,y.jsx)(d.Z,{size:"large"})}):(0,y.jsx)(N,{justify:"center",children:(0,y.jsxs)(E,{children:[(0,y.jsx)(l.Z,{xs:24,style:{height:"fit-content",paddingBottom:"2rem"},children:(0,y.jsxs)(o.Z,{justify:"end",children:[(0,y.jsx)(p.Z,{type:"primary",style:{marginRight:8},children:(0,y.jsx)(f.rU,{to:"/new-data",children:"Add Data"})}),(0,y.jsx)(p.Z,{type:"primary",onClick:function(){(0,z.kS)(F).then((function(e){200===e.status&&(localStorage.clear("token"),L("/auth/login",{replace:!0}))}))},children:"Log out"})]})}),(0,y.jsx)(l.Z,{xs:24,style:{marginBottom:12},children:(0,y.jsx)("h1",{style:{fontWeight:"bold"},children:"personal information"})}),(0,y.jsx)(q,{xs:{span:11},children:(0,y.jsxs)(o.Z,{justify:"space-between",align:"bottom",children:[(0,y.jsx)("p",{style:{fontWeight:"bold"},children:"Name"}),(0,y.jsxs)("p",{children:[null==b?void 0:b.first_name," ",null==b?void 0:b.last_name]})]})}),(0,y.jsx)(q,{xs:{span:11,offset:2},children:(0,y.jsxs)(o.Z,{justify:"space-between",align:"bottom",children:[(0,y.jsx)("p",{style:{fontWeight:"bold"},children:"Email"}),(0,y.jsx)("p",{children:null==b?void 0:b.email})]})}),(0,y.jsx)(q,{xs:{span:11},children:(0,y.jsxs)(o.Z,{justify:"space-between",align:"bottom",children:[(0,y.jsx)("p",{style:{fontWeight:"bold"},children:"Age"}),(0,y.jsx)("p",{children:null==b?void 0:b.age})]})}),(0,y.jsx)(q,{xs:{span:11,offset:2},children:(0,y.jsxs)(o.Z,{justify:"space-between",align:"bottom",children:[(0,y.jsx)("p",{style:{fontWeight:"bold"},children:"Country"}),(0,y.jsx)("p",{children:Z?null==Z||null===(e=Z.find((function(e){return(null==e?void 0:e.id)===(null==b?void 0:b.country)})))||void 0===e?void 0:e.name:""})]})}),(0,y.jsx)(q,{xs:{span:11},children:(0,y.jsxs)(o.Z,{justify:"space-between",align:"bottom",children:[(0,y.jsx)("p",{style:{fontWeight:"bold"},children:"Gender"}),(0,y.jsx)("p",{children:1===(null==b?void 0:b.gender)?"male":"female"})]})}),(0,y.jsx)(q,{xs:{span:11,offset:2},children:(0,y.jsxs)(o.Z,{justify:"space-between",align:"bottom",children:[(0,y.jsx)("p",{style:{fontWeight:"bold"},children:"City"}),(0,y.jsx)("p",{children:O})]})}),(0,y.jsxs)(l.Z,{md:11,children:[" ",(0,y.jsx)(k,{dataSource:C,onRemoveRecord:function(e){(0,z.SR)("/api/sales/".concat(e,"/"),F).then((function(){u.ZP.success("item deleted!"),I(C.filter((function(n){return n.id!==e})))})).catch((function(){return u.ZP.error("item deleted,refresh the page")}))},onUpdateRecord:function(e,n){var t=new FormData;t.append("revenue",n.revenue),t.append("sales_number",n.sales_number),(0,z.Vx)(t,"/api/sales/".concat(e,"/"),F).then((function(e){return e.json()})).then((function(n){u.ZP.success("sale Updated successfully"),I(C.map((function(t){return t.id===e?n:t})))})).catch((function(){return u.ZP.error("something went wrong!")}))}})]}),(0,y.jsxs)(l.Z,{xs:24,md:{span:11,offset:2},children:[(0,y.jsx)(o.Z,{justify:"end",children:(0,y.jsxs)(c.Z,{onChange:function(e){return U(e)},defaultValue:"sales",style:{width:200},children:[(0,y.jsx)(M,{value:1,children:"sales number"}),(0,y.jsx)(M,{value:2,children:"revenue"})]})}),(0,y.jsx)(_,{mode:B,saleList:C})]})]})})}}}]);